# /etc/asound.conf - ALSA -> JACK plugin template (no EQ)
#
# This template routes ALSA applications directly into the JACK plugin.
# Native JACK applications are unaffected; ALSA applications (including
# apulse-wrapped apps) use the JACK bridge defined in 50-jack.conf.
#
# Minimal zero‑config behavior: install and reboot — users then run the GUI
# to change mixer devices, Bluetooth routing, and recording. Do NOT enable
# PulseAudio / PipeWire.

# NOTE: pcm.jack is defined in distro's 50-jack.conf (always system:playback)
# Device switching is handled at the JACK graph level by jack-connection-manager
# This is the correct architecture: ALSA->JACK bridge is stable, routing is dynamic
# jack-connection-manager reads ~/.config/jack-bridge/devices.conf and routes accordingly

# Make the JACK PCM the default ALSA PCM for applications via a plug wrapper
# so format conversions are handled transparently.
pcm.!default {
	type plug
	slave.pcm "jack"
}

# Define ctl.!default to point to hardware card 0 for mixer controls
# This allows GUI mixer to access hardware controls (PCM, Capture, etc.)
# while audio routing goes through the JACK plugin
ctl.!default {
	type hw
	card 0
}

#############################################
# Additional PCM INPUT DEVICES (capture sources)
# GUI writes /etc/asound.conf.d/current_input.conf to select one of these
#############################################

# ---- Card0 (onboard) capture ----
pcm.input_card0_raw {
    type hw
    card 0
    device 0
}
pcm.input_card0 {
    type plug
    slave.pcm "input_card0_raw"
}

# ---- USB Audio Input (by card name) ----
pcm.input_usb_raw {
    type hw
    card "USB"
    device 0
}
pcm.input_usb {
    type plug
    slave.pcm "input_usb_raw"
}

# ---- HDMI Audio Input (by card name) ----
pcm.input_hdmi_raw {
    type hw
    card "HDMI"
    device 0
}
pcm.input_hdmi {
    type plug
    slave.pcm "input_hdmi_raw"
}

# ---- Bluetooth Input via BlueALSA ----
# The GUI writes /etc/asound.conf.d/input_bt.conf to set the MAC and profile.
# This default is a placeholder and will be overridden by the GUI.
pcm.input_bt_raw {
    type bluealsa
    device "00:00:00:00:00:00"
    profile "a2dp"
}
pcm.input_bt {
    type plug
    slave.pcm "input_bt_raw"
}

# ---- Simple bluealsa PCM for generic use ----
# Accepts connection from any paired device (MAC 00:00:00:00:00:00 = any)
pcm.bluealsa {
    type bluealsa
    device "00:00:00:00:00:00"
    profile "a2dp"
}

# Note:
# pcm.current_input is defined in /etc/asound.conf.d/current_input.conf
# and will be managed by the GUI (default points to input_card0).
